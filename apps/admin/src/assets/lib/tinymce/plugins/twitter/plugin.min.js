/**
 * Created by vipaction on 12/19/16.
 */
tinymce.PluginManager.add('twitter', function(editor, url) {


    // Adds a menu item to the tools menu
    editor.addButton('twitter', {
        icon: true,
        image: url+'/twitter.png',
        tooltip: 'Share text to twitter',
        onclick: function() {
            var text = editor.selection.getContent();
            var count = 0;
            for (var i = 0; i< text.length; i++)
                count += /^[\x00-\x7F]*$/.test(text.charAt(i))?1:2;
            if (count>140) {
                alert('Text should be contain less than 140 symbols (current - '+count+')');
            } else {
                editor.selection.setContent(
                    '<span class="twitter-share" data-mce-style="color: #00ccff;" style="color: #00ccff">' + text + '</span>'
                );
            }
        }
    });


});